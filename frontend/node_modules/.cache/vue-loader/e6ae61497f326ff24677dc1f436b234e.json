{"remainingRequest":"D:\\учеба\\JavaScript\\demo\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\учеба\\JavaScript\\demo\\frontend\\src\\components\\home\\v-cont.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\учеба\\JavaScript\\demo\\frontend\\src\\components\\home\\v-cont.vue","mtime":1606058722389},{"path":"D:\\учеба\\JavaScript\\demo\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\учеба\\JavaScript\\demo\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\учеба\\JavaScript\\demo\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\учеба\\JavaScript\\demo\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGV9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAidi1jb250IiwKICAgIGRhdGE6IGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlsZTogJycsCiAgICAgICAgICAgIHR5cGU6ICdEb2N1bWVudCcsCiAgICAgICAgICAgIGxpbms6ICcnLAogICAgICAgICAgICB0aXRsZTogIkRFIEhvbG9kb3YiLAogICAgICAgICAgICAvL2Rlc2NyaXB0aW9uOiAiUGRmIExlY3R1cmVzIG9mIEJTMTkiLAogICAgICAgICAgICB0aFVwbG9hZDogW10sCiAgICAgICAgICAgIHRhZ3NVcGxvYWQ6IFtdCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoe3RhZ3M6ICd0YWdzJywgdGhfcGFnZXM6ICd0aGVtYXRpY2FsUGFnZXMnfSksCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uU3VibWl0KCl7CiAgICAgICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm5lZWRzLXZhbGlkYXRpb24iKTsKICAgICAgICAgICAgaWYoZm9ybS5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIm9uU3VibWl0IHNob3VsZG4ndCB3b3JrIik7CiAgICAgICAgICAgICAgICAvL3JldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgRm9ybURhdGEgPSByZXF1aXJlKCdmb3JtLWRhdGEnKTsKICAgICAgICAgICAgbGV0IGZvcm1fZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKCd0aXRsZScsIHRoaXMudGl0bGUpOwogICAgICAgICAgICAvL2Zvcm1fZGF0YS5hcHBlbmQoJ2Rlc2NyaXB0aW9uJywgdGhpcy5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgIHRoaXMudGFnc1VwbG9hZC5mb3JFYWNoKCh0YWcsIGkpPT57CiAgICAgICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKGB0YWdzWyR7aX1dYCwgdGFnLmlkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZvcm1fZGF0YS5hcHBlbmQoJ3RoZW1hdGljX3BhZ2UnLCB0aGlzLnRoVXBsb2FkLmlkKTsKCiAgICAgICAgICAgIGxldCB0eXBlbiA9IDA7CiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gJ0ltYWdlJyl0eXBlbiA9IDE7CiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gJ1ZpZGVvJyl0eXBlbiA9IDI7CiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gJ0xpbmsnKXR5cGVuID0gMzsKICAgICAgICAgICAgZm9ybV9kYXRhLmFwcGVuZCgndHlwZScsIHR5cGVuKTsKICAgICAgICAgICAgaWYodHlwZW4gPT09IDIpZm9ybV9kYXRhLmFwcGVuZCgnbGluaycsIHRoaXMubGluayk7CiAgICAgICAgICAgIGVsc2UgZm9ybV9kYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZSk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdWJtaXRGaWxlJywgZm9ybV9kYXRhKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUZpbGVVcGxvYWQoKXsKICAgICAgICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldFRhZ3MnKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0VGhlbWF0aWNhbFBhZ2VzJyk7CiAgICB9Cn0K"},{"version":3,"sources":["v-cont.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"v-cont.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\r\n    <div class=\"bg-light\">\r\n        <div class=\"container\">\r\n            <div class=\"py-5 text-center\">\r\n                <h2>Contribute to Digital Library</h2>\r\n                <p class=\"lead\">Here you can upload materials to Digital Library. Please fill the fields carefully and submit for consideration.</p>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n\r\n                <div class=\"col-md-4 order-md-2 mb-4\">\r\n                    <h4 class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                        <span class=\"text-muted\">Your contributions</span>\r\n                    </h4>\r\n                    <ul class=\"list-group mb-3\">\r\n                        <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n                            <div>\r\n                                <h6 class=\"my-0\">Title 1</h6>\r\n                                <small class=\"text-muted\">01.10.2020</small>\r\n                            </div>\r\n                            <span class=\"text-muted\">3 innopoints</span>\r\n                        </li>\r\n                        <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n                            <div>\r\n                                <h6 class=\"my-0\">Title 2</h6>\r\n                                <small class=\"text-muted\">15.10.2020</small>\r\n                            </div>\r\n                            <span class=\"text-muted\">2 innopoints</span>\r\n                        </li>\r\n                        <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n                            <div>\r\n                                <h6 class=\"my-0\">Title 3</h6>\r\n                                <small class=\"text-muted\">14.11.2020</small>\r\n                            </div>\r\n                            <span class=\"text-muted\">5 innopoints</span>\r\n                        </li>\r\n                        <li class=\"list-group-item d-flex justify-content-between\">\r\n                            <span>Innopoints total </span>\r\n                            <strong>10</strong>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <div class=\"input-group\">\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div class=\"col-md-8 order-md-1\">\r\n                    <h4 class=\"mb-3\">Information about material</h4>\r\n                    <form class=\"needs-validation\" novalidate v-on:submit.prevent>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-12 mb-6\">\r\n                                <label for=\"title\">Title</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"\" value=\"\" required v-model=\"title\">\r\n                                <div class=\"invalid-feedback\">\r\n                                    Title is required.\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!--\r\n                        <div class=\"form-group\">\r\n                            <label for=\"description\">Description</label>\r\n                            <textarea class=\"form-control\" id=\"description\" rows=\"3\" required v-model=\"description\"></textarea>\r\n                            <div class=\"invalid-feedback\">\r\n                                Description is required.\r\n                            </div>\r\n                        </div>\r\n                        -->\r\n                        <label for=\"type\">Type</label>\r\n                        <div class=\"mb-3\">\r\n                            <select class=\"custom-select d-block w-100\" id=\"type\" v-model=\"type\">\r\n                                <option value=\"\" disabled>Choose...</option>\r\n                                <option>Document</option>\r\n                                <option>Image</option>\r\n                                <option>Video</option>\r\n                                <option>Link</option>\r\n                            </select>\r\n                            <div class=\"invalid-feedback\">\r\n                                Please select type of your upload.\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\" v-show=\"type!=='Link'\">\r\n                            <label for=\"file\">Choose the file</label>\r\n                            <input type=\"file\" class=\"form-control-file\" id=\"file\" ref=\"file\" v-on:change=\"handleFileUpload()\" required>\r\n                            <div class=\"invalid-feedback\">\r\n                                File is required.\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group\" v-show=\"type==='Link'\">\r\n                            <label for=\"link\">Link</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"link\" placeholder=\"Link:\" value=\"\" required v-model=\"link\">\r\n                            <div class=\"invalid-feedback\">\r\n                                Link is required.\r\n                            </div>\r\n                        </div>\r\n\r\n                        <hr class=\"mb-4\">\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-6\">\r\n                                <h4 class=\"mb-3\">Tags</h4>\r\n                                <div v-for=\"tag in tags\" :key=\"tag.id\" class=\"custom-control custom-checkbox\">\r\n                                    <input class=\"custom-control-input\" :id=\"`tag-${tag.id}`\" type=\"checkbox\" v-bind:value=\"tag\" v-model=\"tagsUpload\">\r\n                                    <label class=\"custom-control-label\" :for=\"`tag-${tag.id}`\">{{tag.name}}</label><br>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6\">\r\n                                <h4 class=\"mb-3\">Thematic page</h4>\r\n                                <div class=\"btn-group btn-group-vertical\" data-toggle=\"buttons\">\r\n\r\n                                    <div v-for=\"th in th_pages\" :key=\"th.id\" class=\"custom-control custom-radio\">\r\n                                        <input class=\"custom-control-input\" :id=\"`th-${th.id}`\" type=\"radio\" v-bind:value=\"th\" v-model=\"thUpload\">\r\n                                        <label class=\"custom-control-label\" :for=\"`th-${th.id}`\">{{th.title}}</label><br>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <hr class=\"mb-4\">\r\n                        <button class=\"btn btn-primary btn-lg btn-block\" type=\"submit\" @click=\"onSubmit()\">Contribute</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {mapState} from 'vuex';\r\n    export default {\r\n        name: \"v-cont\",\r\n        data: function(){\r\n            return {\r\n                file: '',\r\n                type: 'Document',\r\n                link: '',\r\n                title: \"DE Holodov\",\r\n                //description: \"Pdf Lectures of BS19\",\r\n                thUpload: [],\r\n                tagsUpload: []\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState({tags: 'tags', th_pages: 'thematicalPages'}),\r\n        },\r\n        methods: {\r\n            onSubmit(){\r\n                let form = document.querySelector(\".needs-validation\");\r\n                if(form.checkValidity() === false) {\r\n                    form.classList.add('was-validated');\r\n                    //console.log(\"onSubmit shouldn't work\");\r\n                    //return;\r\n                }\r\n                let FormData = require('form-data');\r\n                let form_data = new FormData();\r\n                form_data.append('title', this.title);\r\n                //form_data.append('description', this.description);\r\n                this.tagsUpload.forEach((tag, i)=>{\r\n                    form_data.append(`tags[${i}]`, tag.id);\r\n                });\r\n                form_data.append('thematic_page', this.thUpload.id);\r\n\r\n                let typen = 0;\r\n                if(this.type === 'Image')typen = 1;\r\n                if(this.type === 'Video')typen = 2;\r\n                if(this.type === 'Link')typen = 3;\r\n                form_data.append('type', typen);\r\n                if(typen === 2)form_data.append('link', this.link);\r\n                else form_data.append('file', this.file);\r\n                this.$store.dispatch('submitFile', form_data);\r\n            },\r\n            handleFileUpload(){\r\n                this.file = this.$refs.file.files[0];\r\n            }\r\n        },\r\n        created(){\r\n            this.$store.dispatch('getTags');\r\n            this.$store.dispatch('getThematicalPages');\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .container {\r\n        max-width: 960px;\r\n    }\r\n\r\n    .lh-condensed { line-height: 1.25; }\r\n\r\n</style>"]}]}